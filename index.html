<!doctype html>
<html lang="es"> 
 <head> 
  <meta charset="UTF-8"> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"> 
  <title>TaskMaster Pro</title> 
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"> 
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.13.2/themes/base/jquery-ui.min.css"> 
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.6.0/dist/sweetalert2.min.js"></script> 
  <style>
    /* ===== ESTILOS GENERALES MEJORADOS ===== */
:root {
    --primary-color: #4361ee;
    --secondary-color: #3f37c9;
    --accent-color: #4895ef;
    --dark-color: #1b263b;
    --light-color: #f8f9fa;
    --success-color: #4cc9f0;
    --warning-color: #f8961e;
    --danger-color: #f72585;
    --gray-color: #adb5bd;
    --bg-color: #f5f7fa;
    --text-color: #333;
    --card-bg: white;
    --header-bg: white;
    --sidebar-bg: white;
    --sidebar-text-color: #333; /* Agrega esto */
    --footer-bg: linear-gradient(45deg, #4cc9f0, #6b91f2);
    --shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.dark-mode {
    --primary-color: #4895ef;
    --secondary-color: #4361ee;
    --accent-color: #3f37c9;
    --bg-color: #1a1a2e;
    --text-color: #f8f9fa;
    --card-bg: #16213e;
    --header-bg: #16213e;
    --sidebar-bg: #0f3460;
    --sidebar-text-color: #f8f9fa; /* Agrega esto */
    --footer-bg: linear-gradient(45deg, #1a1a2e, #16213e);
    --shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
}

.nature-mode {
    --primary-color: #2a9d8f;
    --secondary-color: #264653;
    --accent-color: #e9c46a;
    --dark-color: #264653;
    --light-color: #f8f9fa;
    --success-color: #2a9d8f;
    --warning-color: #f4a261;
    --danger-color: #e76f51;
    --bg-color: #f1faee;
    --text-color: #1d3557;
    --card-bg: #a8dadc;
    --header-bg: #457b9d;
    --sidebar-bg: #1d3557;
    --sidebar-text-color: #f8f9fa; /* Agrega esto */
    --footer-bg: linear-gradient(45deg, #457b9d, #1d3557);
}


* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    transition: background-color 0.3s, color 0.3s, transform 0.3s;
}

body {
    background-color: var(--bg-color);
    color: var(--text-color);
    line-height: 1.6;
}

.app-container {
    display: grid;
    grid-template-columns: 250px 1fr;
    grid-template-rows: 70px 1fr 60px;
    min-height: 100vh;
}

/* ===== HEADER MEJORADO ===== */
.app-header {
    grid-column: 1 / -1;
    background-color: var(--header-bg);
    box-shadow: var(--shadow);
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 20px;
    z-index: 10;
    position: relative;
}

.header-left {
    display: flex;
    align-items: center;
}

.app-header h1 {
    font-size: 1.5rem;
    color: var(--text-color);
    margin-left: 10px;
}

.nav-menu-btn {
    background: none;
    border: none;
    color: var(--text-color);
    font-size: 1.2rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    padding: 10px;
}

.header-actions {
    display: flex;
    gap: 15px;
    align-items: center;
}

.theme-switcher {
    display: flex;
    gap: 10px;
}

.theme-btn {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    border: 2px solid var(--card-bg);
    cursor: pointer;
    transition: transform 0.3s;
}

.theme-btn:hover {
    transform: scale(1.1);
}

.theme-btn.default {
    background: linear-gradient(45deg, #4361ee, #4895ef);
}

.theme-btn.dark {
    background: linear-gradient(45deg, #1a1a2e, #16213e);
}

.theme-btn.nature {
    background: linear-gradient(45deg, #2a9d8f, #457b9d);
}

.notification-badge {
    position: relative;
    background: none;
    border: none;
    color: var(--text-color);
    font-size: 1.2rem;
    cursor: pointer;
}

.badge {
    position: absolute;
    top: -5px;
    right: -5px;
    background-color: var(--danger-color);
    color: white;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.7rem;
}

/* ===== SIDEBAR MEJORADO ===== */
.sidebar {
    background-color: var(--sidebar-bg);
    border-right: 1px solid var(--bg-color);
    padding: 20px 0;
    overflow-y: auto;
    color: var(--sidebar-text-color); /* Utiliza la variable para el color del texto */
}

.nav-menu {
    display: flex;
    flex-direction: column;
    height: 100%;
}

.filters {
    list-style: none;
    margin-bottom: 30px;
}

.filters li {
    padding: 12px 20px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 12px;
    transition: all 0.2s;
    color: var(--sidebar-text-color); /* Utiliza la variable para el color del texto */
    position: relative;
}

.filters li:hover,
.filters li.active {
    background-color: rgba(255, 255, 255, 0.1);
    color: white;
    border-left: 3px solid var(--accent-color);
}

.filters li i {
    width: 20px;
    text-align: center;
}

.menu-badge {
    background-color: var(--danger-color);
    color: white;
    border-radius: 20px;
    padding: 2px 8px;
    font-size: 0.7rem;
    margin-left: auto;
}


/* ===== TAGS INTERACTIVOS MEJORADOS ===== */
.tags-container {
    padding: 0 20px;
    margin-bottom: 20px;
}

.tags-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
}

.tags-header h3 {
    font-size: 0.9rem;
    text-transform: uppercase;
    color: rgba(255, 255, 255, 0.7);
    display: flex;
    align-items: center;
    gap: 10px;
}

.btn-tag-add {
    background: none;
    border: none;
    color: rgba(255, 255, 255, 0.7);
    font-size: 0.9rem;
    cursor: pointer;
    transition: all 0.2s;
    padding: 5px;
    border-radius: 4px;
}

.btn-tag-add:hover {
    color: white;
    background-color: rgba(255, 255, 255, 0.1);
}

.tags-controls {
    margin-bottom: 15px;
}

.tag-search {
    position: relative;
    width: 100%;
    margin-bottom: 10px;
}

.tag-search i {
    position: absolute;
    left: 10px;
    top: 50%;
    transform: translateY(-50%);
    color: rgba(255, 255, 255, 0.5);
    font-size: 0.9rem;
}

.tag-search input {
    width: 100%;
    padding: 8px 8px 8px 30px;
    background-color: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 20px;
    color: white;
    font-size: 0.8rem;
    transition: all 0.3s;
}

.tag-search input:focus {
    outline: none;
    border-color: var(--accent-color);
    background-color: rgba(255, 255, 255, 0.2);
}

.tag-filters {
    display: flex;
    gap: 8px;
}

.tag-filter-btn {
    background-color: rgba(255, 255, 255, 0.1);
    border: none;
    border-radius: 20px;
    padding: 4px 12px;
    font-size: 0.7rem;
    color: rgba(255, 255, 255, 0.7);
    cursor: pointer;
    transition: all 0.2s;
}

.tag-filter-btn.active, .tag-filter-btn:hover {
    background-color: var(--accent-color);
    color: white;
}

.tags-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.tag.interactive {
    display: flex;
    align-items: center;
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 0.8rem;
    cursor: pointer;
    transition: all 0.2s;
    background-color: rgba(255, 255, 255, 0.1);
    color: white;
    position: relative;
    overflow: hidden;
}

.tag.interactive::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    width: 4px;
    height: 100%;
    background-color: var(--tag-color, var(--primary-color));
}

.tag-name {
    margin-left: 8px;
    flex-grow: 1;
}

.tag-count {
    background-color: rgba(0, 0, 0, 0.2);
    padding: 2px 8px;
    border-radius: 10px;
    font-size: 0.7rem;
    margin-left: 8px;
}

.tag-actions {
    display: none;
    margin-left: auto;
    gap: 5px;
}

.tag.interactive:hover .tag-actions {
    display: flex;
}

.tag-edit, .tag-delete {
    background: none;
    border: none;
    color: rgba(255, 255, 255, 0.5);
    font-size: 0.7rem;
    cursor: pointer;
    transition: all 0.2s;
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
}

.tag-edit:hover {
    color: var(--success-color);
    background-color: rgba(255, 255, 255, 0.1);
}

.tag-delete:hover {
    color: var(--danger-color);
    background-color: rgba(255, 255, 255, 0.1);
}

.tag-form {
    margin-top: 15px;
    padding: 15px;
    background-color: rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    display: none;
}

.tag-input {
    width: 100%;
    padding: 8px 12px;
    margin-bottom: 10px;
    background-color: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 4px;
    color: white;
}

.tag-color {
    width: 100%;
    height: 40px;
    margin-bottom: 10px;
    background: none;
    border: none;
    cursor: pointer;
}

.tag-form-actions {
    display: flex;
    gap: 10px;
}

.btn-save-tag, .btn-cancel-tag {
    padding: 6px 12px;
    font-size: 0.8rem;
}

/* ===== MAIN CONTENT MEJORADO ===== */
.main-content {
    padding: 25px;
    overflow-y: auto;
    background-color: var(--bg-color);
}

.tasks-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 25px;
    flex-wrap: wrap;
    gap: 15px;
}

.tasks-header h2 {
    font-size: 1.3rem;
    color: var(--text-color);
    display: flex;
    align-items: center;
    gap: 10px;
}

.search-box {
    position: relative;
    width: 300px;
}

.search-box input {
    width: 100%;
    padding: 10px 15px 10px 40px;
    border: 1px solid var(--bg-color);
    border-radius: 6px;
    outline: none;
    transition: all 0.3s;
    background-color: var(--card-bg);
    color: var(--text-color);
}

.search-box input:focus {
    border-color: var(--accent-color);
    box-shadow: 0 0 0 3px rgba(72, 149, 239, 0.2);
}

.search-box i {
    position: absolute;
    left: 15px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--gray-color);
}

/* ===== DASHBOARD MEJORADO ===== */
.dashboard-header {
    margin-bottom: 30px;
}

.welcome-message {
    color: var(--text-color);
    opacity: 0.8;
    margin-top: 5px;
}

.user-name {
    color: var(--primary-color);
    font-weight: 600;
}

.stats-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.stat-card {
    background-color: var(--card-bg);
    border-radius: 8px;
    padding: 20px;
    box-shadow: var(--shadow);
    display: flex;
    align-items: center;
    gap: 15px;
    transition: transform 0.3s;
}

.stat-card:hover {
    transform: translateY(-5px);
}

.stat-icon {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background-color: rgba(72, 149, 239, 0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--primary-color);
    font-size: 1.2rem;
}

.stat-info h3 {
    font-size: 0.9rem;
    color: var(--gray-color);
    margin-bottom: 5px;
}

.stat-value {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--text-color);
}

.recent-tasks {
    background-color: var(--card-bg);
    border-radius: 8px;
    padding: 20px;
    box-shadow: var(--shadow);
}

.recent-tasks h3 {
    font-size: 1.1rem;
    margin-bottom: 15px;
    display: flex;
    align-items: center;
    gap: 10px;
    color: var(--text-color);
}

/* ===== ABOUT SECTION MEJORADA ===== */
.about-header {
    text-align: center;
    margin-bottom: 30px;
}

.about-header h2 {
    font-size: 1.8rem;
    color: var(--primary-color);
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
}

.subtitle {
    font-size: 1.1rem;
    color: var(--text-color);
    opacity: 0.8;
}

.about-content {
    max-width: 1200px;
    margin: 0 auto;
}

.about-card {
    background-color: var(--card-bg);
    border-radius: 10px;
    padding: 25px;
    margin-bottom: 30px;
    box-shadow: var(--shadow);
}

.about-card-icon {
    width: 60px;
    height: 60px;
    background-color: rgba(72, 149, 239, 0.1);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--primary-color);
    font-size: 1.5rem;
    margin-bottom: 20px;
}

.about-card h3 {
    font-size: 1.3rem;
    margin-bottom: 15px;
    color: var(--text-color);
    display: flex;
    align-items: center;
    gap: 10px;
}

.about-card p {
    color: var(--text-color);
    opacity: 0.9;
    line-height: 1.6;
}

.features-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.feature-card {
    background-color: var(--card-bg);
    border-radius: 8px;
    padding: 20px;
    box-shadow: var(--shadow);
    transition: transform 0.3s;
}

.feature-card:hover {
    transform: translateY(-5px);
}

.feature-card i {
    font-size: 1.5rem;
    color: var(--primary-color);
    margin-bottom: 15px;
}

.feature-card h4 {
    font-size: 1.1rem;
    margin-bottom: 10px;
    color: var(--text-color);
}

.feature-card p {
    font-size: 0.9rem;
    color: var(--text-color);
    opacity: 0.8;
}

.creator-card {
    background-color: var(--card-bg);
    border-radius: 10px;
    padding: 30px;
    box-shadow: var(--shadow);
    display: flex;
    gap: 30px;
    align-items: center;
}

.creator-avatar img {
    width: 150px;
    height: 150px;
    border-radius: 50%;
    object-fit: cover;
    border: 5px solid rgba(72, 149, 239, 0.2);
}

.creator-info h3 {
    font-size: 0.9rem;
    text-transform: uppercase;
    color: var(--gray-color);
    margin-bottom: 5px;
}

.creator-info h4 {
    font-size: 1.5rem;
    color: var(--text-color);
    margin-bottom: 15px;
}

.creator-bio {
    color: var(--text-color);
    opacity: 0.9;
    margin-bottom: 20px;
    line-height: 1.6;
}

.creator-stats {
    display: flex;
    gap: 20px;
    margin-bottom: 20px;
}

.stat {
    text-align: center;
}

.number {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--primary-color);
    display: block;
}

.label {
    font-size: 0.8rem;
    color: var(--gray-color);
}

.social-links {
    display: flex;
    gap: 15px;
}

.social-link {
    color: var(--text-color);
    font-size: 1.2rem;
    opacity: 0.7;
    transition: all 0.3s;
}

.social-link:hover {
    color: var(--primary-color);
    opacity: 1;
    transform: translateY(-3px);
}

/* ===== TASK LIST MEJORADA ===== */
.task-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
}

.task-card {
    background-color: var(--card-bg);
    border-radius: 8px;
    box-shadow: var(--shadow);
    padding: 20px;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.task-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
}

.task-card.priority-high {
    border-left: 4px solid var(--danger-color);
}

.task-card.priority-medium {
    border-left: 4px solid var(--warning-color);
}

.task-card.priority-low {
    border-left: 4px solid var(--success-color);
}

.task-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 15px;
}

.task-title {
    font-weight: 600;
    font-size: 1.1rem;
    margin-bottom: 5px;
    cursor: pointer;
    color: var(--text-color);
}

.task-title.completed {
    text-decoration: line-through;
    color: var(--gray-color);
}

.task-actions {
    display: flex;
    gap: 10px;
}

.task-actions button {
    background: none;
    border: none;
    cursor: pointer;
    color: var(--gray-color);
    font-size: 0.9rem;
    transition: all 0.2s;
}

.task-actions button:hover {
    color: var(--primary-color);
}

.task-due-date {
    font-size: 0.8rem;
    color: var(--gray-color);
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    gap: 5px;
}

.task-due-date.overdue {
    color: var(--danger-color);
}

.task-time {
    font-size: 0.8rem;
    color: var(--gray-color);
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    gap: 5px;
}

.task-description {
    font-size: 0.9rem;
    color: var(--text-color);
    margin-bottom: 15px;
    line-height: 1.5;
    opacity: 0.8;
}

.task-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 5px;
    margin-bottom: 15px;
}

.task-tag {
    background-color: var(--bg-color);
    padding: 3px 8px;
    border-radius: 20px;
    font-size: 0.7rem;
    color: var(--text-color);
}

.task-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: 10px;
    border-top: 1px solid var(--bg-color);
}

.task-priority {
    font-size: 0.8rem;
    padding: 3px 8px;
    border-radius: 20px;
    color: white;
}

.priority-high {
    background-color: var(--danger-color);
}

.priority-medium {
    background-color: var(--warning-color);
}

.priority-low {
    background-color: var(--success-color);
}

.task-status {
    display: flex;
    align-items: center;
    gap: 5px;
    font-size: 0.8rem;
}

/* ===== FOOTER MEJORADO ===== */
.app-footer {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    background: var(--footer-bg);
    color: white;
    padding: 10px 0;
    z-index: 10;
    box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.2);
}

.footer-nav {
    display: flex;
    justify-content: space-around;
    width: 100%;
}

.footer-link {
    color: white;
    text-decoration: none;
    display: flex;
    flex-direction: column;
    align-items: center;
    font-size: 14px;
    transition: all 0.3s;
    padding: 5px 10px;
    border-radius: 6px;
}

.footer-link i {
    font-size: 18px;
    margin-bottom: 4px;
}

.footer-link:hover, .footer-link.active {
    color: var(--accent-color);
    transform: translateY(-3px);
    background-color: rgba(255, 255, 255, 0.1);
}

/* ===== BOTONES FLOTANTES MEJORADOS ===== */
.floating-btn {
    position: fixed;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    z-index: 100;
    border: none;
    color: white;
    font-size: 1.5rem;
    transition: all 0.3s;
}

.floating-btn:hover {
    transform: scale(1.1);
}

.floating-btn.add {
    bottom: 80px;
    left: 20px;
    background-color: var(--primary-color);
}

.floating-btn.stats {
    bottom: 80px;
    right: 20px;
    background-color: var(--secondary-color);
}
/* ===== MODALES MEJORADOS ===== */

/* Contenedor principal del modal */
.modal {
    display: none; /* Oculto por defecto */
    position: fixed; /* Se mantiene fijo en la ventana */
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5); /* Fondo oscuro semitransparente */
    z-index: 1000; /* Asegura que esté por encima de otros elementos */
    justify-content: center; /* Centra el contenido horizontalmente */
    align-items: center; /* Centra el contenido verticalmente */
}

/* Contenido interno del modal */
.modal-content {
    background-color: var(--card-bg);
    border-radius: 8px;
    width: 90%;
    max-width: 600px; /* Ancho máximo para evitar que sea demasiado grande en pantallas amplias */
    max-height: 90vh; /* Altura máxima para evitar que ocupe toda la pantalla */
    overflow-y: auto; /* Permite el scroll vertical si el contenido es muy largo */
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2); /* Sombra sutil para destacar */
    animation: modalFadeIn 0.3s; /* Animación de aparición suave */
    color: var(--text-color);
}

/* Animación de aparición del modal */
@keyframes modalFadeIn {
    from {
        opacity: 0;
        transform: translateY(-20px); /* Empieza ligeramente arriba */
    }
    to {
        opacity: 1;
        transform: translateY(0); /* Termina en su posición */
    }
}

/* Encabezado del modal */
.modal-header {
    padding: 15px 20px;
    border-bottom: 1px solid var(--bg-color);
    display: flex;
    justify-content: space-between; /* Espacia el título y el botón de cierre */
    align-items: center;
}

.modal-header h3 {
    font-size: 1.2rem;
    color: var(--text-color);
}

.modal-header .close {
    font-size: 1.5rem;
    cursor: pointer;
    color: var(--gray-color);
    transition: all 0.2s; /* Transición suave para el hover */
}

.modal-header .close:hover {
    color: var(--danger-color);
}

/* Cuerpo del modal (donde va el contenido principal) */
.modal-body {
    padding: 20px;
}

/* Estilos para los grupos de formulario */
.form-group {
    margin-bottom: 15px;
}

.form-group label {
    display: block; /* Asegura que la etiqueta ocupe toda la línea */
    margin-bottom: 5px;
    font-weight: 500;
    font-size: 0.9rem;
    color: var(--text-color);
}

/* Estilos para los controles de formulario (input, select, textarea) */
.form-control {
    width: 100%;
    padding: 10px;
    border: 1px solid var(--bg-color);
    border-radius: 4px;
    font-size: 0.9rem;
    transition: all 0.3s; /* Transición suave para el focus */
    background-color: var(--card-bg);
    color: var(--text-color);
}

.form-control:focus {
    border-color: var(--accent-color);
    box-shadow: 0 0 0 3px rgba(72, 149, 239, 0.2); /* Resaltado al enfocar */
    outline: none; /* Elimina el outline predeterminado del navegador */
}

/* Estilos específicos para el textarea */
textarea.form-control {
    min-height: 100px;
    resize: vertical; /* Permite redimensionar verticalmente */
}

/* Contenedor para agrupar elementos del formulario en una fila */
.form-row {
    display: flex;
    gap: 15px; /* Espacio entre los elementos de la fila */
}

.form-row .form-group {
    flex: 1; /* Los elementos dentro de la fila se expanden para llenar el espacio */
}

/* Estilos para la sección de carga de archivos */
.file-upload {
    position: relative;
    overflow: hidden;
    display: inline-block;
    margin-bottom: 10px;
}

/* Botón personalizado para la carga de archivos */
.file-upload-btn {
    border: 1px dashed var(--bg-color);
    padding: 10px 15px;
    border-radius: 4px;
    background-color: var(--bg-color);
    color: var(--text-color);
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 10px;
    transition: all 0.3s;
}

.file-upload-btn:hover {
    background-color: var(--sidebar-bg);
    color: white;
}

/* Input de tipo archivo (oculto) */
.file-upload input[type="file"] {
    position: absolute;
    left: 0;
    top: 0;
    opacity: 0;
    width: 100%;
    height: 100%;
    cursor: pointer;
}

/* Contenedor para la previsualización de archivos */
.preview-files {
    display: flex;
    flex-wrap: wrap; /* Permite que los elementos pasen a la siguiente línea si no hay suficiente espacio */
    gap: 10px;
    margin-top: 10px;
}

/* Estilos para cada vista previa de archivo */
.file-preview {
    position: relative;
    width: 80px;
    height: 80px;
    border-radius: 4px;
    overflow: hidden;
    border: 1px solid var(--bg-color);
}

.file-preview img {
    width: 100%;
    height: 100%;
    object-fit: cover; /* La imagen se ajusta manteniendo su proporción */
}

/* Estilos específicos para la previsualización de archivos PDF */
.file-preview.pdf {
    background-color: var(--bg-color);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--danger-color);
}

/* Botón para eliminar un archivo de la previsualización */
.remove-file {
    position: absolute;
    top: 2px;
    right: 2px;
    background-color: rgba(0, 0, 0, 0.5);
    color: white;
    border: none;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 10px;
}
/* ===== ESTILOS DE BOTONES 3D MEJORADOS PARA MODAL ===== */

.modal-footer {
    padding: 15px 20px;
    border-top: 1px solid var(--bg-color);
    display: flex;
    justify-content: flex-end;
    gap: 15px; /* Aumentamos un poco el espacio */
}

.modal-footer button {
    padding: 12px 20px; /* Un poco más de padding */
    border: none;
    border-radius: 8px; /* Bordes más redondeados para el efecto */
    font-size: 1rem;
    font-weight: 500;
    cursor: pointer;
    box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.2); /* Sombra suave para dar profundidad */
    transition: all 0.2s ease-in-out; /* Transición más completa */
    position: relative; /* Necesario para el pseudo-elemento */
    overflow: hidden; /* Para que el pseudo-elemento no se salga */
}

.modal-footer button::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(255, 255, 255, 0.2); /* Overlay blanco sutil */
    opacity: 0;
    transition: opacity 0.2s ease-in-out;
    border-radius: 8px;
}

.modal-footer button:hover::before {
    opacity: 1; /* El overlay aparece al hacer hover */
}

.modal-footer button:active {
    transform: translateY(1px); /* Ligeramente hacia abajo al hacer clic */
    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2); /* Sombra más sutil al hacer clic */
}

/* Estilo para el botón de "Cerrar" */
.modal-footer .btn-cerrar {
    background-color: #e74c3c; /* Rojo más llamativo */
    color: white;
}

.modal-footer .btn-cerrar:hover {
    background-color: #c0392b; /* Tono más oscuro al hacer hover */
}

/* Estilo para el botón de "Cancelar" */
.modal-footer .btn-cancelar {
    background-color: #f39c12; /* Naranja para indicar una acción secundaria */
    color: white;
}

.modal-footer .btn-cancelar:hover {
    background-color: #e67e22; /* Tono más oscuro al hacer hover */
}

/* Estilo para el botón de "Guardar Tarea" */
.modal-footer .btn-guardar {
    background-color: #2ecc71; /* Verde para una acción positiva */
    color: white;
}

.modal-footer .btn-guardar:hover {
    background-color: #27ae60; /* Tono más oscuro al hacer hover */
}

/* Opcional: Estilo para el botón de "Eliminar" (si lo tienes) */
.modal-footer .btn-eliminar {
    background-color: #d35400; /* Otro tono de rojo/naranja para eliminar */
    color: white;
}

.modal-footer .btn-eliminar:hover {
    background-color: #c0392b;
}

/* Estilo para botón deshabilitado */
.modal-footer button:disabled {
    background-color: #bdc3c7;
    color: #95a5a6;
    cursor: not-allowed;
    box-shadow: none;
    transform: none;
}

.modal-footer button:disabled::before {
    opacity: 0 !important;
}


/* ===== ESTILOS RESPONSIVOS ===== */
@media (max-width: 992px) {
    .app-container {
        grid-template-columns: 1fr;
        grid-template-rows: 70px 1fr 60px;
    }

    .sidebar {
        position: fixed;
        top: 70px;
        left: -250px;
        width: 250px;
        height: calc(100vh - 130px);
        transition: left 0.3s;
        z-index: 100;
    }

    .sidebar.open {
        left: 0;
    }

    .nav-menu-btn {
        display: block;
    }

    .stats-cards {
        grid-template-columns: 1fr 1fr;
    }
}

@media (max-width: 768px) {
    .stats-cards {
        grid-template-columns: 1fr;
    }

    .search-box {
        width: 200px;
    }

    .floating-btn {
        width: 50px;
        height: 50px;
        font-size: 1.2rem;
    }

    .floating-btn.add {
        bottom: 70px;
        left: 15px;
    }

    .floating-btn.stats {
        bottom: 70px;
        right: 15px;
    }

    .creator-card {
        flex-direction: column;
        text-align: center;
    }

    .creator-stats {
        justify-content: center;
    }

    .social-links {
        justify-content: center;
    }
}

@media (max-width: 576px) {
    .tasks-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
    }

    .search-box {
        width: 100%;
    }

    .task-list {
        grid-template-columns: 1fr;
    }

    .form-row {
        flex-direction: column;
        gap: 0;
    }

    .modal-content {
        width: 95%;
    }
}

/* ===== ANIMACIONES ADICIONALES ===== */
@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

.fade-in {
    animation: fadeIn 0.5s ease-in;
}

/* ===== EFECTOS DE HOVER PARA TARJETAS ===== */
.card-hover-effect {
    transition: transform 0.3s, box-shadow 0.3s;
}

.card-hover-effect:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
}
</style> 
 </head> 
 <body> <!-- ============================ --> <!-- ESTRUCTURA PRINCIPAL --> <!-- ============================ --> 
  <div class="app-container"> <!-- ============================ --> <!-- HEADER DE LA APLICACIÓN --> <!-- ============================ --> 
   <header class="app-header"> 
    <div class="header-left"> <button class="nav-menu-btn"> <i class="fas fa-bars"></i> <h1>TaskMaster Pro</h1> </button> 
    </div> 
    <div class="header-actions"> 
     <div class="theme-switcher"> <button class="theme-btn default" title="Tema por defecto" data-theme="default"></button> <button class="theme-btn dark" title="Modo oscuro" data-theme="dark"></button> <button class="theme-btn nature" title="Tema naturaleza" data-theme="nature"></button> 
     </div> <button class="btn notification-badge" id="notifications-btn"> <i class="fas fa-bell"></i> <span class="badge" id="notification-count">0</span> </button> 
    </div> 
   </header> <!-- ============================ --> <!-- SIDEBAR / MENÚ LATERAL --> <!-- ============================ --> 
   <aside class="sidebar"> 
    <nav class="nav-menu"> 
     <ul class="filters"> 
      <li class="active" data-filter="all"><i class="fas fa-list"></i> Todas las Tareas</li> 
      <li data-filter="important"><i class="fas fa-star"></i> Importantes</li> 
      <li data-filter="today"><i class="fas fa-calendar-day"></i> Hoy</li> 
      <li data-filter="pending"><i class="fas fa-clock"></i> Pendientes</li> 
      <li data-filter="completed"><i class="fas fa-check-circle"></i> Completadas</li> 
      <li data-filter="recent"><i class="fas fa-history"></i> Recientes</li> 
     </ul> 
     <div class="tags-container"> 
      <div class="tags-header"> 
       <h3><i class="fas fa-tags"></i> Etiquetas</h3> <button class="btn-tag-add" id="add-tag-btn" title="Añadir etiqueta"> <i class="fas fa-plus"></i> </button> 
      </div> 
      <div class="tags-controls"> 
       <div class="tag-search"> <i class="fas fa-search"></i> 
        <input type="text" placeholder="Buscar etiquetas..."> 
       </div> 
      </div> 
      <div class="tags-list" id="tags-list"> <!-- Las etiquetas se cargarán dinámicamente --> 
      </div> 
      <div class="tag-form" style="display: none;"> 
       <input type="text" class="tag-input" placeholder="Nombre de la etiqueta"> 
       <input type="color" class="tag-color" value="#4361ee"> 
       <div class="tag-form-actions"> <button class="btn btn-primary btn-save-tag">Guardar</button> <button class="btn btn-secondary btn-cancel-tag">Cancelar</button> 
       </div> 
      </div> 
     </div> 
    </nav> 
   </aside> <!-- ============================ --> <!-- CONTENIDO PRINCIPAL --> <!-- ============================ --> 
   <main class="main-content"> <!-- ========== SECCIÓN DASHBOARD ========== --> 
    <div class="content-section active" id="dashboard-section"> 
     <div class="dashboard-header"> 
      <h2><i class="fas fa-home"></i> Inicio</h2> 
      <p class="welcome-message">Bienvenido de vuelta, nos alegra tenerte de nuevo. Aquí tienes un resumen de tu productividad.</p> 
     </div> 
     <div class="stats-cards"> 
      <div class="stat-card"> 
       <div class="stat-icon"> <i class="fas fa-tasks"></i> 
       </div> 
       <div class="stat-info"> 
        <h3>Tareas Totales</h3> <span class="stat-value" id="total-tasks-count">0</span> 
       </div> 
      </div> 
      <div class="stat-card"> 
       <div class="stat-icon"> <i class="fas fa-check-circle"></i> 
       </div> 
       <div class="stat-info"> 
        <h3>Completadas</h3> <span class="stat-value" id="completed-tasks-count">0</span> 
       </div> 
      </div> 
      <div class="stat-card"> 
       <div class="stat-icon"> <i class="fas fa-clock"></i> 
       </div> 
       <div class="stat-info"> 
        <h3>Pendientes</h3> <span class="stat-value" id="pending-tasks-count">0</span> 
       </div> 
      </div> 
      <div class="stat-card"> 
       <div class="stat-icon"> <i class="fas fa-exclamation-triangle"></i> 
       </div> 
       <div class="stat-info"> 
        <h3>Urgentes</h3> <span class="stat-value" id="urgent-tasks-count">0</span> 
       </div> 
      </div> 
     </div> 
     <div class="dashboard-charts"> 
      <div class="chart-container"> 
       <canvas id="tasks-priority-chart"></canvas> 
      </div> 
      <div class="chart-container"> 
       <canvas id="tasks-completion-chart"></canvas> 
      </div> 
     </div> 
     <div class="recent-tasks"> 
      <h3><i class="fas fa-history"></i> Tareas Recientes</h3> <button class="btn btn-secondary" id="export-recent-btn"> <i class="fas fa-file-export"></i> Exportar </button> 
      <div class="task-list" id="recent-tasks-list"> <!-- Tareas recientes se cargarán aquí --> 
      </div> 
     </div> 
    </div> <!-- ========== SECCIÓN DE TAREAS ========== --> 
    <div class="content-section" id="tasks-section"> 
     <div class="tasks-header"> 
      <h2><i class="fas fa-list-check"></i> Mis Tareas</h2> 
      <div class="search-box"> <i class="fas fa-search"></i> 
       <input type="text" placeholder="Buscar tareas..." id="task-search"> 
      </div> 
     </div> 
     <div class="task-list" id="task-list"> <!-- Las tareas se cargarán dinámicamente aquí --> 
     </div> 
    </div> <!-- ========== SECCIÓN ACERCA DE ========== --> 
    <div class="content-section" id="about-section"> 
     <div class="about-header"> 
      <h2><i class="fas fa-info-circle"></i> Acerca de TaskMaster Pro</h2> 
      <p class="subtitle">Organiza tu vida, aumenta tu productividad</p> 
     </div> 
     <div class="about-content"> 
      <div class="about-card"> 
       <div class="about-card-icon"> <i class="fas fa-question-circle"></i> 
       </div> 
       <h3>¿Qué es TaskMaster Pro?</h3> 
       <p>TaskMaster Pro es una aplicación avanzada de gestión de tareas diseñada para ayudarte a organizar tu vida y trabajo de manera eficiente. Con características como recordatorios, categorización, priorización y análisis de productividad, nunca perderás de vista lo que es importante.</p> 
      </div> 
      <div class="features-grid"> 
       <div class="feature-card"> <i class="fas fa-tasks"></i> 
        <h4>Gestión Completa</h4> 
        <p>Administra todas tus tareas en un solo lugar con fechas y horas específicas.</p> 
       </div> 
       <div class="feature-card"> <i class="fas fa-exclamation-triangle"></i> 
        <h4>Sistema de Prioridades</h4> 
        <p>Clasifica tus tareas como Alta, Media o Baja prioridad para una mejor organización.</p> 
       </div> 
       <div class="feature-card"> <i class="fas fa-tags"></i> 
        <h4>Categorización</h4> 
        <p>Organiza tus tareas con etiquetas personalizadas para un acceso rápido.</p> 
       </div> 
       <div class="feature-card"> <i class="fas fa-paperclip"></i> 
        <h4>Archivos Adjuntos</h4> 
        <p>Adjunta imágenes, documentos o PDFs a tus tareas para tener todo en un lugar.</p> 
       </div> 
       <div class="feature-card"> <i class="fas fa-chart-line"></i> 
        <h4>Estadísticas</h4> 
        <p>Visualiza tu progreso y mejora tu productividad con análisis detallados.</p> 
       </div> 
       <div class="feature-card"> <i class="fas fa-palette"></i> 
        <h4>Temas Personalizables</h4> 
        <p>Elige entre varios temas visuales para adaptar la aplicación a tu estilo.</p> 
       </div> 
      </div> 
      <div class="creator-card"> 
       <div class="creator-avatar"> 
        <img src="https://raw.githubusercontent.com/AndresAlvarezmonvsyo/App-de-tareas-By-Andres-Alvarez/refs/heads/main/995a6f26-84c6-4e0b-99d1-c42a8b11d00d.webp" alt="Andres Alvarez"> 
       </div> 
       <div class="creator-info"> 
        <h3>El Creador</h3> 
        <h4>Andres Alvarez</h4> 
        <p class="creator-bio">Desarrollador web con más de 5 años de experiencia creando aplicaciones móviles y web. Apasionado por la innovación y siempre aprendiendo nuevas tecnologías.</p> 
        <div class="creator-stats"> 
         <div class="stat"> <span class="number">50+</span> <span class="label">Proyectos</span> 
         </div> 
         <div class="stat"> <span class="number">5+</span> <span class="label">Años Exp.</span> 
         </div> 
         <div class="stat"> <span class="number">100%</span> <span class="label">Dedicación</span> 
         </div> 
        </div> 
        <div class="social-links"> <a href="#" class="social-link"><i class="fab fa-github"></i></a> <a href="#" class="social-link"><i class="fab fa-linkedin"></i></a> <a href="#" class="social-link"><i class="fab fa-twitter"></i></a> <a href="#" class="social-link"><i class="fas fa-globe"></i></a> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </main> <!-- ============================ --> <!-- BOTONES FLOTANTES --> <!-- ============================ --> <button class="floating-btn add" id="new-task-btn"> <i class="fas fa-plus"></i> </button> <button class="floating-btn stats" id="stats-btn"> <i class="fas fa-chart-bar"></i> </button> <!-- ============================ --> <!-- FOOTER --> <!-- ============================ --> 
   <footer class="app-footer"> 
    <div class="footer-nav"> <a href="#" class="footer-link active" data-section="dashboard-section"> <i class="fas fa-home"></i> <span>Inicio</span> </a> <a href="#" class="footer-link" data-section="tasks-section"> <i class="fas fa-tasks"></i> <span>Tareas</span> </a> <a href="#" class="footer-link" data-section="about-section"> <i class="fas fa-info-circle"></i> <span>Acerca de</span> </a> 
    </div> 
   </footer> 
  </div> <!-- ============================ --> <!-- MODAL: NUEVA/EDITAR TAREA --> <!-- ============================ --> 
  <div class="modal" id="task-modal"> 
   <div class="modal-content"> 
    <div class="modal-header"> 
     <h3 id="modal-title">Nueva Tarea</h3> <span class="close">×</span> 
    </div> 
    <div class="modal-body"> 
     <form id="task-form"> 
      <input type="hidden" id="task-id"> 
      <div class="form-group"> <label for="task-title">Título</label> 
       <input type="text" class="form-control" id="task-title" required> 
      </div> 
      <div class="form-group"> <label for="task-description">Descripción</label> <textarea class="form-control" id="task-description"></textarea> 
      </div> 
      <div class="form-row"> 
       <div class="form-group"> <label for="task-due-date">Fecha límite</label> 
        <input type="date" class="form-control" id="task-due-date"> 
       </div> 
       <div class="form-group"> <label for="task-due-time">Hora límite</label> 
        <input type="time" class="form-control" id="task-due-time"> 
       </div> 
      </div> 
      <div class="form-row"> 
       <div class="form-group"> <label for="task-priority">Prioridad</label> <select class="form-control" id="task-priority"> <option value="low">Baja</option> <option value="medium" selected>Media</option> <option value="high">Alta</option> </select> 
       </div> 
       <div class="form-group"> <label for="task-recurrence">Repetición</label> <select class="form-control" id="task-recurrence"> <option value="none">Ninguna</option> <option value="daily">Diaria</option> <option value="weekly">Semanal</option> <option value="monthly">Mensual</option> <option value="yearly">Anual</option> </select> 
       </div> 
      </div> 
      <div class="form-row"> 
       <div class="form-group"> <label for="task-reminder">Recordatorio</label> <select class="form-control" id="task-reminder"> <option value="none">Ninguno</option> <option value="5min">5 minutos antes</option> <option value="15min">15 minutos antes</option> <option value="30min">30 minutos antes</option> <option value="1h">1 hora antes</option> <option value="1d">1 día antes</option> </select> 
       </div> 
       <div class="form-group"> <label for="task-category">Categoría</label> <select class="form-control" id="task-category"> <option value="personal">Personal</option> <option value="work">Trabajo</option> <option value="study">Estudio</option> <option value="health">Salud</option> <option value="other">Otro</option> </select> 
       </div> 
      </div> 
      <div class="form-group"> <label>Archivos adjuntos</label> 
       <div class="file-upload"> <button type="button" class="file-upload-btn"> <i class="fas fa-paperclip"></i> Adjuntar archivos </button> 
        <input type="file" id="file-input" multiple accept="image/*,.pdf"> 
       </div> 
       <div class="preview-files" id="preview-files"> <!-- Vista previa de archivos se mostrará aquí --> 
       </div> 
      </div> 
      <div class="form-group"> <label for="task-tags">Etiquetas (separadas por comas)</label> 
       <input type="text" class="form-control" id="task-tags" placeholder="ej. trabajo, importante, proyecto"> 
      </div> 
     </form> 
    </div> 
    <div class="modal-footer"> <button type="button" class="btn btn-secondary close-modal">Cancelar</button> <button type="button" id="save-task-btn" class="btn btn-primary">Guardar Tarea</button> 
    </div> 
   </div> 
  </div> <!-- ============================ --> <!-- MODAL: ESTADÍSTICAS --> <!-- ============================ --> 
  <div class="modal" id="stats-modal"> 
   <div class="modal-content"> 
    <div class="modal-header"> 
     <h3>Estadísticas de Tareas</h3> <span class="close">×</span> 
    </div> 
    <div class="modal-body"> 
     <div class="stats-container"> 
      <div class="stats-grid"> 
       <div class="stat-card"> <i class="fa fa-tasks"></i> 
        <h4>Tareas Totales</h4> 
        <div class="value" id="total-tasks">
          0 
        </div> 
       </div> 
       <div class="stat-card"> <i class="fa fa-check-circle"></i> 
        <h4>Tareas Completadas</h4> 
        <div class="value" id="completed-tasks">
          0 
        </div> 
       </div> 
       <div class="stat-card"> <i class="fa fa-hourglass-half"></i> 
        <h4>Tareas Pendientes</h4> 
        <div class="value" id="pending-tasks">
          0 
        </div> 
       </div> 
      </div> 
      <div class="chart-container"> 
       <canvas id="priority-chart"></canvas> 
      </div> 
      <div class="chart-container"> 
       <canvas id="completion-chart"></canvas> 
      </div> 
      <div class="chart-container"> 
       <canvas id="category-chart"></canvas> 
      </div> 
     </div> 
    </div> 
    <div class="modal-footer"> <button type="button" class="btn btn-secondary close-modal">Cerrar</button> 
    </div> 
   </div> 
  </div> <!-- ============================ --> <!-- MODAL: NOTIFICACIONES --> <!-- ============================ --> 
  <div class="modal" id="notifications-modal"> 
   <div class="modal-content"> 
    <div class="modal-header"> 
     <h3>Tareas Próximas</h3> <span class="close">×</span> 
    </div> 
    <div class="modal-body"> 
     <div class="notifications-list" id="notifications-list"> <!-- Las notificaciones se agregarán aquí --> 
     </div> 
    </div> 
    <div class="modal-footer"> <button type="button" class="btn btn-secondary close-modal">Cerrar</button> 
    </div> 
   </div> 
  </div> 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script> 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script> 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js"></script> 
  <script>
   // Funcionalidad de navegación para mostrar solo una sección a la vez
document.addEventListener('DOMContentLoaded', function() {
    // Seleccionar todos los enlaces de navegación (tanto en el footer como en la sidebar)
    const navLinks = document.querySelectorAll('.footer-link, .nav-menu .filters li');
    
    // Función para mostrar solo la sección seleccionada y ocultar las demás
    function showSection(sectionId) {
        // Obtener todas las secciones de contenido
        const sections = document.querySelectorAll('.content-section');
        
        // Ocultar todas las secciones
        sections.forEach(section => {
            section.classList.remove('active');
            section.style.display = 'none';
        });
        
        // Mostrar solo la sección seleccionada
        const activeSection = document.getElementById(sectionId);
        if (activeSection) {
            activeSection.classList.add('active');
            activeSection.style.display = 'block';
        }
        
        // Actualizar clases activas en los enlaces de navegación
        navLinks.forEach(link => {
            if (link.dataset.section === sectionId || link.getAttribute('data-filter') === sectionId) {
                link.classList.add('active');
            } else {
                link.classList.remove('active');
            }
        });
    }
    
    // Añadir listeners a todos los enlaces de navegación
    navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const section = this.dataset.section || this.getAttribute('data-filter');
            
            // Mapear los filtros a las secciones correctas
            let sectionToShow = section;
            if (section === 'all' || section === 'important' || section === 'today' || 
                section === 'pending' || section === 'completed' || section === 'recent') {
                sectionToShow = 'tasks-section';
            }
            
            showSection(sectionToShow);
        });
    });
    
    // Mostrar la sección de inicio por defecto al cargar la página
    showSection('dashboard-section');
});

// Estilos CSS adicionales para controlar la visibilidad de las secciones
document.addEventListener('DOMContentLoaded', function() {
    // Añadir estilos CSS dinámicamente
    const style = document.createElement('style');
    style.textContent = `
        /* Ocultar todas las secciones de contenido por defecto */
        .content-section {
            display: none;
        }
        
        /* Mostrar solo la sección activa */
        .content-section.active {
            display: block;
        }
        
        /* Asegurar que las secciones ocupen todo el espacio disponible */
        .main-content {
            height: calc(100vh - 60px - 60px); /* Altura total - header - footer */
            overflow-y: auto;
        }
        
        /* Estilo para el elemento activo en la navegación */
        .footer-link.active,
        .nav-menu .filters li.active {
            color: var(--primary-color);
            font-weight: bold;
            background-color: rgba(67, 97, 238, 0.1);
        }
    `;
    document.head.appendChild(style);
});  
 </script> 
  <script>
function cambiarColorTextoSidebar(bgColor) {
  // Función para determinar si un color es claro u oscuro
  function esColorClaro(color) {
    // Elimina el # si está presente
    color = color.replace("#", "");

    // Parsea el color a RGB
    let r, g, b;
    if (color.length === 3) {
      r = parseInt(color[0] + color[0], 16);
      g = parseInt(color[1] + color[1], 16);
      b = parseInt(color[2] + color[2], 16);
    } else if (color.length === 6) {
      r = parseInt(color.substring(0, 2), 16);
      g = parseInt(color.substring(2, 4), 16);
      b = parseInt(color.substring(4, 6), 16);
    } else {
      return true; // Color no válido, se asume claro para evitar problemas
    }

    // Calcula la luminosidad (un valor entre 0 y 255)
    const luminosidad = (0.299 * r + 0.587 * g + 0.114 * b);

    // Un valor de luminosidad mayor a 128 se considera claro
    return luminosidad > 128;
  }

  // Determina el color del texto basado en si el fondo es claro u oscuro
  const colorTexto = esColorClaro(bgColor) ? '#000' : '#fff';

  // Aplica el color del texto a la barra lateral usando una variable CSS
  const sidebar = document.getElementById('sidebar');
  if (sidebar) {
    sidebar.style.setProperty('--sidebar-text-color', colorTexto);
  }
}




 
</script> 
  <script>
$(document).ready(function() {
    // Variables globales
    let tasks = JSON.parse(localStorage.getItem('tasks')) || [];
    let currentTaskId = null;
    let attachedFiles = [];
    let currentTheme = localStorage.getItem('theme') || 'default';
    let priorityChart, completionChart, categoryChart, dashboardPriorityChart, dashboardCompletionChart;
    let activeSection = 'dashboard-section';
    
    // Inicializar la aplicación
    initApp();
    
    function initApp() {
        applyTheme(currentTheme);
        renderTaskList();
        setupEventListeners();
        updateNotificationCount();
        updateDashboardStats();
        showSection(activeSection);
        
        // Agregar algunas tareas de ejemplo si no hay ninguna
             if (tasks.length === 0) {
            /*
            const sampleTasks = [
                {
                    id: '1',
                    title: 'Tarea de ejemplo importante',
                    description: 'Esta es una tarea de demostración con alta prioridad',
                    dueDate: new Date(Date.now() + 86400000).toISOString().split('T')[0],
                    dueTime: '12:00',
                    priority: 'high',
                    category: 'work',
                    tags: ['ejemplo', 'urgente'],
                    attachments: [],
                    completed: false,
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString(),
                    order: 0
                }
            ];
            tasks = sampleTasks;
            saveTasksToLocalStorage();
            renderTaskList();
            updateDashboardStats();
            */
        }
    }
    
    function setupEventListeners() {
        // Botón nueva tarea
        $('#new-task-btn').click(openNewTaskModal);
        
        // Botón estadísticas
        $('#stats-btn').click(openStatsModal);
        
        // Botón notificaciones
        $('#notifications-btn').click(openNotificationsModal);
        
        // Cerrar modales
        $('.close, .close-modal').click(closeModals);
        
        // Guardar tarea
        $('#save-task-btn').click(saveTask);
        
        // Adjuntar archivos
        $('#file-input').change(handleFileUpload);
        
        // Buscar tareas
        $('#task-search').on('input', function() {
            renderTaskList($(this).val().toLowerCase());
        });
        
        // Filtros del sidebar
        $('.filters li').click(function() {
            $('.filters li').removeClass('active');
            $(this).addClass('active');
            renderTaskList();
        });
        
        // Tags del sidebar
        $('.tag').click(function() {
            const tag = $(this).data('tag');
            renderTaskList('', tag);
        });
        
        // Menú hamburguesa
        $('.nav-menu-btn').click(function() {
            $('.sidebar').toggleClass('open');
        });
        
        // Hacer las tareas arrastrables
        $("#task-list").sortable({
            items: ".task-card",
            cursor: "move",
            opacity: 0.7,
            placeholder: "dropzone",
            update: function(event, ui) {
                updateTaskOrder();
            }
        }).disableSelection();
        
        // Delegación de eventos para elementos dinámicos
        $(document).on('click', '.btn-edit', function() {
            openEditTaskModal($(this).data('id'));
        });
        
        $(document).on('click', '.btn-delete', function() {
            deleteTask($(this).data('id'));
        });
        
        $(document).on('click', '.task-title', function() {
            openEditTaskModal($(this).closest('.task-card').data('id'));
        });
        
        $(document).on('change', '.task-status input[type="checkbox"]', function() {
            toggleTaskCompletion($(this).data('id'));
        });
        
        $(document).on('click', '.remove-file', function() {
            const fileName = $(this).data('name');
            attachedFiles = attachedFiles.filter(f => f.name !== fileName);
            $(this).parent().remove();
        });
        
        // Cambiar tema
        $('.theme-btn').click(function() {
            const theme = $(this).data('theme');
            applyTheme(theme);
        });
        
        // Navegación por footer
        $('.footer-link').click(function(e) {
            e.preventDefault();
            const sectionId = $(this).data('section');
            showSection(sectionId);
        });
        
        // Exportar tareas recientes
        $('#export-recent-btn').click(exportRecentTasks);
        
        // Verificar recordatorios cada minuto
        setInterval(checkReminders, 60000);
    }
    
    function showSection(sectionId) {
        $('.content-section').removeClass('active');
        $(`#${sectionId}`).addClass('active');
        
        $('.footer-link').removeClass('active');
        $(`.footer-link[data-section="${sectionId}"]`).addClass('active');
        
        activeSection = sectionId;
        
        if (sectionId === 'dashboard-section') {
            updateDashboardStats();
        } else if (sectionId === 'tasks-section') {
            renderTaskList();
        }
    }
    
    function updateDashboardStats() {
        // Actualizar contadores
        const totalTasks = tasks.length;
        const completedTasks = tasks.filter(t => t.completed).length;
        const pendingTasks = totalTasks - completedTasks;
        const urgentTasks = tasks.filter(t => t.priority === 'high').length;
        
        $('#total-tasks-count').text(totalTasks);
        $('#completed-tasks-count').text(completedTasks);
        $('#pending-tasks-count').text(pendingTasks);
        $('#urgent-tasks-count').text(urgentTasks);
        
        // Actualizar gráficos del dashboard
        updateDashboardPriorityChart();
        updateDashboardCompletionChart();
        
        // Actualizar tareas recientes
        renderRecentTasks();
    }
    
    function updateDashboardPriorityChart() {
        const ctx = document.getElementById('tasks-priority-chart').getContext('2d');
        
        const priorityCounts = {
            high: tasks.filter(t => t.priority === 'high').length,
            medium: tasks.filter(t => t.priority === 'medium').length,
            low: tasks.filter(t => t.priority === 'low').length
        };
        
        if (dashboardPriorityChart) {
            dashboardPriorityChart.destroy();
        }
        
        dashboardPriorityChart = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['Alta', 'Media', 'Baja'],
                datasets: [{
                    data: [priorityCounts.high, priorityCounts.medium, priorityCounts.low],
                    backgroundColor: [
                        'rgba(247, 37, 133, 0.8)',
                        'rgba(248, 150, 30, 0.8)',
                        'rgba(76, 201, 240, 0.8)'
                    ],
                    borderColor: [
                        'rgba(247, 37, 133, 1)',
                        'rgba(248, 150, 30, 1)',
                        'rgba(76, 201, 240, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'bottom',
                    },
                    title: {
                        display: true,
                        text: 'Distribución por Prioridad',
                        color: 'var(--text-color)'
                    }
                }
            }
        });
    }
    
    function updateDashboardCompletionChart() {
        const ctx = document.getElementById('tasks-completion-chart').getContext('2d');
        
        const completionData = {
            completed: tasks.filter(t => t.completed).length,
            pending: tasks.filter(t => !t.completed).length
        };
        
        if (dashboardCompletionChart) {
            dashboardCompletionChart.destroy();
        }
        
        dashboardCompletionChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['Completadas', 'Pendientes'],
                datasets: [{
                    label: 'Tareas',
                    data: [completionData.completed, completionData.pending],
                    backgroundColor: [
                        'rgba(76, 201, 240, 0.8)',
                        'rgba(248, 150, 30, 0.8)'
                    ],
                    borderColor: [
                        'rgba(76, 201, 240, 1)',
                        'rgba(248, 150, 30, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    },
                    title: {
                        display: true,
                        text: 'Tareas Completadas vs Pendientes',
                        color: 'var(--text-color)'
                    }
                }
            }
        });
    }
    
    function applyTheme(theme) {
        currentTheme = theme;
        localStorage.setItem('theme', theme);
        $('body').removeClass('dark-mode nature-mode');
        
        if (theme === 'dark') {
            $('body').addClass('dark-mode');
        } else if (theme === 'nature') {
            $('body').addClass('nature-mode');
        }
    }
    
    function openNewTaskModal() {
        currentTaskId = null;
        $('#modal-title').text('Nueva Tarea');
        $('#task-form')[0].reset();
        $('#preview-files').empty();
        attachedFiles = [];
        $('#task-modal').show();
    }
    
    function openEditTaskModal(taskId) {
        const task = tasks.find(t => t.id.toString() === taskId.toString());
        if (!task) return;
        
        currentTaskId = taskId;
        $('#modal-title').text('Editar Tarea');
        $('#task-id').val(task.id);
        $('#task-title').val(task.title);
        $('#task-description').val(task.description || '');
        $('#task-due-date').val(task.dueDate || '');
        $('#task-due-time').val(task.dueTime || '');
        $('#task-priority').val(task.priority || 'medium');
        $('#task-recurrence').val(task.recurrence || 'none');
        $('#task-reminder').val(task.reminder || 'none');
        $('#task-category').val(task.category || 'personal');
        $('#task-tags').val(task.tags ? task.tags.join(', ') : '');
        
        // Mostrar archivos adjuntos
        $('#preview-files').empty();
        attachedFiles = task.attachments || [];
        attachedFiles.forEach(file => {
            renderFilePreview(file);
        });
        
        $('#task-modal').show();
    }
    
    function renderFilePreview(file) {
        let previewHtml = '';
        
        if (file.type && file.type.startsWith('image/')) {
            previewHtml = `
                <div class="file-preview">
                    <img src="${file.data}" alt="${file.name}">
                    <button class="remove-file" data-name="${file.name}">&times;</button>
                </div>
            `;
        } else if ((file.type && file.type === 'application/pdf') || file.isPdf) {
            previewHtml = `
                <div class="file-preview pdf">
                    <i class="fas fa-file-pdf" style="font-size: 2rem;"></i>
                    <button class="remove-file" data-name="${file.name}">&times;</button>
                </div>
            `;
        }
        
        $('#preview-files').append(previewHtml);
    }
    
    function saveTask() {
        const title = $('#task-title').val().trim();
        if (!title) {
            alert('El título es requerido');
            return;
        }
        
        // Get the existing task if editing, or create a new one
        const existingTask = currentTaskId ? tasks.find(t => t.id === currentTaskId) : null;
        
        const taskData = {
            id: currentTaskId || Date.now().toString(),
            title: title,
            description: $('#task-description').val().trim(),
            dueDate: $('#task-due-date').val(),
            dueTime: $('#task-due-time').val(),
            priority: $('#task-priority').val(),
            recurrence: $('#task-recurrence').val(),
            reminder: $('#task-reminder').val(),
            category: $('#task-category').val(),
            tags: $('#task-tags').val().split(',').map(tag => tag.trim()).filter(tag => tag),
            attachments: [...attachedFiles],
            completed: existingTask ? existingTask.completed : false,
            createdAt: existingTask ? existingTask.createdAt : new Date().toISOString(),
            updatedAt: new Date().toISOString(),
            order: existingTask ? existingTask.order : tasks.length
        };
        
        if (currentTaskId) {
            // Update existing task
            tasks = tasks.map(task => 
                task.id === currentTaskId ? taskData : task
            );
        } else {
            // Add new task
            tasks.push(taskData);
        }
        
        saveTasksToLocalStorage();
        renderTaskList();
        updateNotificationCount();
        updateDashboardStats();
        closeModals();
    }
    
    function deleteTask(taskId) {
        if (confirm('¿Estás seguro de que quieres eliminar esta tarea?')) {
            tasks = tasks.filter(task => task.id.toString() !== taskId.toString());
            saveTasksToLocalStorage();
            renderTaskList();
            updateNotificationCount();
            updateDashboardStats();
        }
    }
    
    function toggleTaskCompletion(taskId) {
        tasks = tasks.map(task => {
            if (task.id.toString() === taskId.toString()) {
                return {
                    ...task,
                    completed: !task.completed,
                    updatedAt: new Date().toISOString()
                };
            }
            return task;
        });
        
        saveTasksToLocalStorage();
        renderTaskList();
        updateNotificationCount();
        updateDashboardStats();
    }
    
    function updateTaskOrder() {
        const newOrder = [];
        $('#task-list .task-card').each(function(index) {
            const taskId = $(this).data('id');
            newOrder.push(taskId);
        });
        
        tasks = tasks.map(task => {
            const newIndex = newOrder.indexOf(task.id.toString());
            return {
                ...task,
                order: newIndex !== -1 ? newIndex : task.order
            };
        });
        
        saveTasksToLocalStorage();
    }
    
    function saveTasksToLocalStorage() {
        localStorage.setItem('tasks', JSON.stringify(tasks));
    }
    
    function renderTaskList(searchTerm = '', filterTag = '') {
        const $taskList = $('#task-list');
        $taskList.empty();
        
        // Obtener filtro activo
        const activeFilter = $('.filters li.active').data('filter');
        
        // Filtrar tareas
        let filteredTasks = [...tasks];
        
        // Aplicar filtro activo
        if (activeFilter === 'important') {
            filteredTasks = filteredTasks.filter(task => task.priority === 'high');
        } else if (activeFilter === 'today') {
            const today = new Date().toISOString().split('T')[0];
            filteredTasks = filteredTasks.filter(task => task.dueDate === today);
        } else if (activeFilter === 'pending') {
            filteredTasks = filteredTasks.filter(task => !task.completed);
        } else if (activeFilter === 'completed') {
            filteredTasks = filteredTasks.filter(task => task.completed);
        } else if (activeFilter === 'recent') {
            // Mostrar las 10 tareas más recientes
            filteredTasks = [...tasks]
                .sort((a, b) => new Date(b.updatedAt) - new Date(a.updatedAt))
                .slice(0, 10);
        }
        
        // Aplicar búsqueda
        if (searchTerm) {
            filteredTasks = filteredTasks.filter(task => 
                task.title.toLowerCase().includes(searchTerm) || 
                (task.description && task.description.toLowerCase().includes(searchTerm)) ||
                (task.tags && task.tags.some(tag => tag.toLowerCase().includes(searchTerm)))
            );
        }
        
        // Aplicar filtro por etiqueta
        if (filterTag) {
            filteredTasks = filteredTasks.filter(task => 
                task.tags && task.tags.map(t => t.toLowerCase()).includes(filterTag.toLowerCase())
            );
        }
        
        // Ordenar tareas
        filteredTasks.sort((a, b) => a.order - b.order);
        
        // Renderizar tareas
        if (filteredTasks.length === 0) {
            $taskList.html('<p style="grid-column: 1 / -1; text-align: center; color: var(--gray-color);">No hay tareas para mostrar</p>');
            return;
        }
        
        filteredTasks.forEach(task => {
            const dueDate = task.dueDate ? new Date(task.dueDate) : null;
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            let dueDateHtml = '';
            if (dueDate) {
                const isOverdue = dueDate < today && !task.completed;
                dueDateHtml = `
                    <div class="task-due-date ${isOverdue ? 'overdue' : ''}">
                        <i class="fas fa-calendar-alt"></i>
                        ${dueDate.toLocaleDateString()}
                        ${isOverdue ? '<i class="fas fa-exclamation-circle"></i>' : ''}
                    </div>
                `;
            }
            
            let timeHtml = '';
            if (task.dueTime) {
                timeHtml = `
                    <div class="task-time">
                        <i class="fas fa-clock"></i>
                        ${task.dueTime}
                    </div>
                `;
            }
            
            let priorityBadge = '';
            if (task.priority === 'high') {
                priorityBadge = '<span class="task-priority priority-high">Alta</span>';
            } else if (task.priority === 'medium') {
                priorityBadge = '<span class="task-priority priority-medium">Media</span>';
            } else {
                priorityBadge = '<span class="task-priority priority-low">Baja</span>';
            }
            
            let categoryBadge = '';
            if (task.category) {
                const categoryText = {
                    'personal': 'Personal',
                    'work': 'Trabajo',
                    'study': 'Estudio',
                    'health': 'Salud',
                    'other': 'Otro'
                }[task.category];
                
                categoryBadge = `<span class="task-category category-${task.category}">${categoryText}</span>`;
            }
            
            let recurrenceBadge = '';
            if (task.recurrence && task.recurrence !== 'none') {
                const recurrenceText = {
                    'daily': 'Diaria',
                    'weekly': 'Semanal',
                    'monthly': 'Mensual',
                    'yearly': 'Anual'
                }[task.recurrence];
                
                recurrenceBadge = `<span class="task-recurrence"><i class="fas fa-redo"></i> ${recurrenceText}</span>`;
            }
            
            let attachmentsHtml = '';
            if (task.attachments && task.attachments.length > 0) {
                attachmentsHtml = '<div class="task-attachments">';
                task.attachments.forEach(file => {
                    if (file.type && file.type.startsWith('image/')) {
                        attachmentsHtml += `
                            <div class="attachment-thumbnail">
                                <img src="${file.data}" alt="${file.name}">
                            </div>
                        `;
                    } else if ((file.type && file.type === 'application/pdf') || file.isPdf) {
                        attachmentsHtml += `
                            <div class="attachment-thumbnail pdf">
                                <i class="fas fa-file-pdf"></i>
                            </div>
                        `;
                    }
                });
                attachmentsHtml += '</div>';
            }
            
            let tagsHtml = '';
            if (task.tags && task.tags.length > 0) {
                tagsHtml = '<div class="task-tags">';
                task.tags.forEach(tag => {
                    tagsHtml += `<span class="task-tag">${tag}</span>`;
                });
                tagsHtml += '</div>';
            }
            
            const taskHtml = `
                <div class="task-card ${task.priority ? 'priority-' + task.priority : ''}" data-id="${task.id}">
                    <div class="task-header">
                        <div>
                            <div class="task-title ${task.completed ? 'completed' : ''}">${task.title}</div>
                            ${dueDateHtml}
                            ${timeHtml}
                        </div>
                        <div class="task-actions">
                            <button class="btn-edit" data-id="${task.id}"><i class="fas fa-edit"></i></button>
                            <button class="btn-delete" data-id="${task.id}"><i class="fas fa-trash"></i></button>
                        </div>
                    </div>
                    ${task.description ? `<div class="task-description">${task.description}</div>` : ''}
                    ${attachmentsHtml}
                    ${tagsHtml}
                    <div class="task-footer">
                        <div class="task-metadata">
                            ${priorityBadge}
                            ${categoryBadge}
                            ${recurrenceBadge}
                        </div>
                        <div class="task-status">
                            <label class="switch">
                                <input type="checkbox" ${task.completed ? 'checked' : ''} data-id="${task.id}">
                                <span class="slider round"></span>
                            </label>
                            <span>${task.completed ? 'Completada' : 'Pendiente'}</span>
                        </div>
                    </div>
                </div>
            `;
            
            $taskList.append(taskHtml);
        });
    }
    
    function renderRecentTasks() {
        const $recentTaskList = $('#recent-tasks-list');
        $recentTaskList.empty();
        
        // Obtener las 10 tareas más recientes
        const recentTasks = [...tasks]
            .sort((a, b) => new Date(b.updatedAt) - new Date(a.updatedAt))
            .slice(0, 10);
        
        if (recentTasks.length === 0) {
            $recentTaskList.html('<p style="text-align: center; color: var(--gray-color);">No hay tareas recientes</p>');
            return;
        }
        
        recentTasks.forEach(task => {
            const dueDate = task.dueDate ? new Date(task.dueDate) : null;
            
            let dueDateHtml = '';
            if (dueDate) {
                dueDateHtml = `
                    <div class="task-due-date">
                        <i class="fas fa-calendar-alt"></i>
                        ${dueDate.toLocaleDateString()}
                    </div>
                `;
            }
            
            let timeHtml = '';
            if (task.dueTime) {
                timeHtml = `
                    <div class="task-time">
                        <i class="fas fa-clock"></i>
                        ${task.dueTime}
                    </div>
                `;
            }
            
            const taskHtml = `
                <div class="task-card ${task.priority ? 'priority-' + task.priority : ''}" data-id="${task.id}">
                    <div class="task-header">
                        <div>
                            <div class="task-title ${task.completed ? 'completed' : ''}">${task.title}</div>
                            ${dueDateHtml}
                            ${timeHtml}
                        </div>
                    </div>
                    ${task.description ? `<div class="task-description">${task.description}</div>` : ''}
                    <div class="task-footer">
                        <div class="task-status">
                            <span>${task.completed ? 'Completada' : 'Pendiente'}</span>
                        </div>
                    </div>
                </div>
            `;
            
            $recentTaskList.append(taskHtml);
        });
    }
    
    function exportRecentTasks() {
        const recentTasks = [...tasks]
            .sort((a, b) => new Date(b.updatedAt) - new Date(a.updatedAt))
            .slice(0, 10);
        
        if (recentTasks.length === 0) {
            alert('No hay tareas recientes para exportar');
            return;
        }
        
        let csvContent = "data:text/csv;charset=utf-8,";
        csvContent += "Título,Descripción,Fecha,Hora,Prioridad,Estado,Etiquetas\n";
        
        recentTasks.forEach(task => {
            const row = [
                `"${task.title}"`,
                `"${task.description || ''}"`,
                task.dueDate || '',
                task.dueTime || '',
                task.priority === 'high' ? 'Alta' : task.priority === 'medium' ? 'Media' : 'Baja',
                task.completed ? 'Completada' : 'Pendiente',
                `"${task.tags ? task.tags.join(', ') : ''}"`
            ].join(',');
            
            csvContent += row + "\n";
        });
        
        const encodedUri = encodeURI(csvContent);
        const link = document.createElement("a");
        link.setAttribute("href", encodedUri);
        link.setAttribute("download", "tareas_recientes.csv");
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    }
    
    function closeModals() {
        $('.modal').hide();
    }
    
    function openStatsModal() {
        updateStats();
        $('#stats-modal').show();
    }
    
    function openNotificationsModal() {
        updateNotifications();
        $('#notifications-modal').show();
    }
    
    function updateStats() {
        // Actualizar contadores
        $('#total-tasks').text(tasks.length);
        $('#completed-tasks').text(tasks.filter(t => t.completed).length);
        $('#pending-tasks').text(tasks.filter(t => !t.completed).length);
        
        // Actualizar gráficos
        updatePriorityChart();
        updateCompletionChart();
        updateCategoryChart();
    }
    
    function updatePriorityChart() {
        const ctx = document.getElementById('priority-chart').getContext('2d');
        
        const priorityCounts = {
            high: tasks.filter(t => t.priority === 'high').length,
            medium: tasks.filter(t => t.priority === 'medium').length,
            low: tasks.filter(t => t.priority === 'low').length
        };
        
        if (priorityChart) {
            priorityChart.destroy();
        }
        
        priorityChart = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['Alta', 'Media', 'Baja'],
                datasets: [{
                    data: [priorityCounts.high, priorityCounts.medium, priorityCounts.low],
                    backgroundColor: [
                        'rgba(247, 37, 133, 0.8)',
                        'rgba(248, 150, 30, 0.8)',
                        'rgba(76, 201, 240, 0.8)'
                    ],
                    borderColor: [
                        'rgba(247, 37, 133, 1)',
                        'rgba(248, 150, 30, 1)',
                        'rgba(76, 201, 240, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'bottom',
                    },
                    title: {
                        display: true,
                        text: 'Distribución por Prioridad',
                        color: 'var(--text-color)'
                    }
                }
            }
        });
    }
    
    function updateCompletionChart() {
        const ctx = document.getElementById('completion-chart').getContext('2d');
        
        const completionData = {
            completed: tasks.filter(t => t.completed).length,
            pending: tasks.filter(t => !t.completed).length
        };
        
        if (completionChart) {
            completionChart.destroy();
        }
        
        completionChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['Completadas', 'Pendientes'],
                datasets: [{
                    label: 'Tareas',
                    data: [completionData.completed, completionData.pending],
                    backgroundColor: [
                        'rgba(76, 201, 240, 0.8)',
                        'rgba(248, 150, 30, 0.8)'
                    ],
                    borderColor: [
                        'rgba(76, 201, 240, 1)',
                        'rgba(248, 150, 30, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    },
                    title: {
                        display: true,
                        text: 'Tareas Completadas vs Pendientes',
                        color: 'var(--text-color)'
                    }
                }
            }
        });
    }
    
    function updateCategoryChart() {
        const ctx = document.getElementById('category-chart').getContext('2d');
        
        const categoryCounts = {
            personal: tasks.filter(t => t.category === 'personal').length,
            work: tasks.filter(t => t.category === 'work').length,
            study: tasks.filter(t => t.category === 'study').length,
            health: tasks.filter(t => t.category === 'health').length,
            other: tasks.filter(t => t.category === 'other').length
        };
        
        if (categoryChart) {
            categoryChart.destroy();
        }
        
        categoryChart = new Chart(ctx, {
            type: 'pie',
            data: {
                labels: ['Personal', 'Trabajo', 'Estudio', 'Salud', 'Otro'],
                datasets: [{
                    data: [
                        categoryCounts.personal,
                        categoryCounts.work,
                        categoryCounts.study,
                        categoryCounts.health,
                        categoryCounts.other
                    ],
                    backgroundColor: [
                        'rgba(54, 162, 235, 0.8)',
                        'rgba(255, 99, 132, 0.8)',
                        'rgba(255, 206, 86, 0.8)',
                        'rgba(75, 192, 192, 0.8)',
                        'rgba(153, 102, 255, 0.8)'
                    ],
                    borderColor: [
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 99, 132, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'bottom',
                    },
                    title: {
                        display: true,
                        text: 'Distribución por Categoría',
                        color: 'var(--text-color)'
                    }
                }
            }
        });
    }
    
    function updateNotifications() {
        const $notificationsList = $('#notifications-list');
        $notificationsList.empty();
        
        const today = new Date();
        today.setHours(0, 0, 0, 0);
        
        const upcomingTasks = tasks
            .filter(task => !task.completed && task.dueDate)
            .filter(task => {
                const dueDate = new Date(task.dueDate);
                const timeDiff = dueDate.getTime() - today.getTime();
                const daysDiff = timeDiff / (1000 * 3600 * 24);
                return daysDiff <= 3; // Mostrar tareas que vencen en los próximos 3 días
            })
            .sort((a, b) => new Date(a.dueDate) - new Date(b.dueDate));
        
        if (upcomingTasks.length === 0) {
            $notificationsList.html('<p style="text-align: center; color: var(--gray-color);">No hay tareas próximas</p>');
            return;
        }
        
        upcomingTasks.forEach(task => {
            const dueDate = new Date(task.dueDate);
            const daysDiff = Math.floor((dueDate.getTime() - today.getTime()) / (1000 * 3600 * 24));
            
            let dueText = '';
            if (daysDiff === 0) {
                dueText = 'Hoy';
            } else if (daysDiff === 1) {
                dueText = 'Mañana';
            } else {
                dueText = `En ${daysDiff} días`;
            }
            
            if (task.dueTime) {
                dueText += ` a las ${task.dueTime}`;
            }
            
            const notificationHtml = `
                <div class="notification-item" style="padding: 10px; border-bottom: 1px solid var(--bg-color);">
                    <div style="display: flex; justify-content: space-between;">
                        <strong>${task.title}</strong>
                        <span style="color: ${daysDiff === 0 ? 'var(--danger-color)' : 'var(--warning-color)'};">${dueText}</span>
                    </div>
                    ${task.description ? `<div style="margin-top: 5px; font-size: 0.9em;">${task.description}</div>` : ''}
                </div>
            `;
            
            $notificationsList.append(notificationHtml);
        });
    }
    
    function updateNotificationCount() {
        const today = new Date();
        today.setHours(0, 0, 0, 0);
        
        const upcomingCount = tasks
            .filter(task => !task.completed && task.dueDate)
            .filter(task => {
                const dueDate = new Date(task.dueDate);
                const timeDiff = dueDate.getTime() - today.getTime();
                const daysDiff = timeDiff / (1000 * 3600 * 24);
                return daysDiff <= 3;
            }).length;
        
        $('#notification-count').text(upcomingCount);
        if (upcomingCount === 0) {
            $('#notification-count').hide();
        } else {
            $('#notification-count').show();
        }
    }
    
    function checkReminders() {
        const now = new Date();
        tasks.forEach(task => {
            if (task.reminder && task.reminder !== 'none' && task.dueDate && task.dueTime && !task.completed) {
                const dueDateTime = new Date(`${task.dueDate}T${task.dueTime}`);
                let reminderTime = new Date(dueDateTime);
                
                // Calcular el tiempo del recordatorio según la configuración
                switch(task.reminder) {
                    case '5min':
                        reminderTime.setMinutes(reminderTime.getMinutes() - 5);
                        break;
                    case '15min':
                        reminderTime.setMinutes(reminderTime.getMinutes() - 15);
                        break;
                    case '30min':
                        reminderTime.setMinutes(reminderTime.getMinutes() - 30);
                        break;
                    case '1h':
                        reminderTime.setHours(reminderTime.getHours() - 1);
                        break;
                    case '1d':
                        reminderTime.setDate(reminderTime.getDate() - 1);
                        break;
                }
                
                // Verificar si es hora de mostrar el recordatorio
                if (now >= reminderTime && now <= dueDateTime) {
                    showReminderNotification(task);
                }
            }
        });
    }
    
    function showReminderNotification(task) {
        const dueDate = new Date(`${task.dueDate}T${task.dueTime}`);
        const options = { 
            weekday: 'long', 
            year: 'numeric', 
            month: 'long', 
            day: 'numeric',
            hour: '2-digit',
            minute: '2-digit'
        };
        
        Swal.fire({
            title: 'Recordatorio de Tarea',
            html: `
                <h3>${task.title}</h3>
                ${task.description ? `<p>${task.description}</p>` : ''}
                <p><strong>Vence:</strong> ${dueDate.toLocaleDateString('es-ES', options)}</p>
            `,
            icon: 'info',
            confirmButtonText: 'Entendido'
        });
    }
    
    function handleFileUpload(event) {
        const files = event.target.files;
        
        for (let i = 0; i < files.length; i++) {
            const file = files[i];
            const reader = new FileReader();
            
            reader.onload = function(e) {
                const fileData = {
                    name: file.name,
                    type: file.type,
                    size: file.size,
                    data: e.target.result
                };
                
                attachedFiles.push(fileData);
                renderFilePreview(fileData);
            };
            
            if (file.type.startsWith('image/')) {
                reader.readAsDataURL(file);
            } else if (file.type === 'application/pdf') {
                const fileData = {
                    name: file.name,
                    type: file.type,
                    size: file.size,
                    isPdf: true
                };
                
                attachedFiles.push(fileData);
                renderFilePreview(fileData);
            }
        }
        
        event.target.value = '';
    }
    
    // Cerrar modal al hacer clic fuera del contenido
    $(window).click(function(event) {
        if ($(event.target).hasClass('modal')) {
            closeModals();
        }
    });
});
</script> 
 </body>
</html>
